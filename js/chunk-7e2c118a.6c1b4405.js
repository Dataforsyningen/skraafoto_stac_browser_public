(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e2c118a"],{"188f":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("section",{staticClass:"items mb-4"},[e("h2",[t._v(" Items "),t.api?t._e():[t._v("("+t._s(t.items.length)+")")],t.api?t._e():e("SortButtons",{staticClass:"ml-4",model:{value:t.sort,callback:function(e){t.sort=e},expression:"sort"}})],2),t.api?e("Pagination",{ref:"topPagination",attrs:{pagination:t.pagination,placement:"top"},on:{paginate:t.paginate}}):t._e(),t.allowFilter?[t.api?e("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.itemFilter",modifiers:{itemFilter:!0}}],staticClass:"mb-4 mt-2 ml-3",attrs:{pressed:t.filtersOpen,variant:"outline-primary"}},[e("b-icon-search"),t._v(" Filter ")],1):t._e(),e("b-collapse",{attrs:{id:"itemFilter"},model:{value:t.filtersOpen,callback:function(e){t.filtersOpen=e},expression:"filtersOpen"}},[e("ItemFilter",{attrs:{stac:t.stac,sort:t.canSort,collectionOnly:!0},model:{value:t.filters,callback:function(e){t.filters=e},expression:"filters"}})],1)]:t._e(),t.chunkedItems.length>0?e("b-card-group",{attrs:{columns:""}},t._l(t.chunkedItems,(function(i){return e("Item",{key:i.href,attrs:{item:i,selected:t.selected}})})),1):e("p",[t._v("Sorry, no items found.")]),t.api?e("Pagination",{attrs:{pagination:t.pagination,placement:"bottom"},on:{paginate:t.paginate}}):t.hasMore?e("b-button",{directives:[{name:"b-visible",rawName:"v-b-visible.200",value:t.showMore,expression:"showMore",modifiers:{200:!0}}],attrs:{variant:"primary"},on:{click:t.showMore}},[t._v("Show more...")]):t._e()],2)},a=[],n=function(){var t=this,e=t._self._c;return e("b-card",t._b({directives:[{name:"b-visible",rawName:"v-b-visible.200",value:t.load,expression:"load",modifiers:{200:!0}}],staticClass:"item-card",class:{queued:!this.data,deprecated:t.isDeprecated},attrs:{"no-body":""}},"b-card",t.cardProps,!1),[t.thumbnail&&t.showThumbnail?e("b-card-img",{staticClass:"thumbnail",attrs:{src:t.thumbnail.href,alt:t.thumbnail.title,crossorigin:t.crossOriginMedia}}):t._e(),e("b-card-body",[e("b-card-title",[e("StacLink",{staticClass:"stretched-link",attrs:{data:[t.data,t.item]}})],1),e("b-card-text",[e("small",{staticClass:"text-muted"},[t.extent?[t._v(t._s(t._f("TemporalExtent")(t.extent)))]:t.data&&t.data.properties.datetime?[t._v(t._s(t._f("Timestamp")(t.data.properties.datetime)))]:[t._v("No time given")]],2)]),t.fileFormats.length>0||t.isDeprecated?e("b-card-text",[t._l(t.fileFormats,(function(i){return e("b-badge",{key:i,staticClass:"mr-1 mt-1 fileformat",attrs:{variant:"secondary"}},[t._v(t._s(t._f("MediaType")(i)))])})),t.isDeprecated?e("b-badge",{staticClass:"mr-1 mt-1 deprecated",attrs:{variant:"warning"}},[t._v("Deprecated")]):t._e()],2):t._e()],1)],1)},r=[],o=i("2f62"),c=i("b701"),l=i("2a32"),h={name:"Item",components:{StacLink:c["default"]},props:{item:{type:Object,required:!0},selected:{type:Array,default:()=>[]}},data(){return{showThumbnail:!1}},computed:{...Object(o["c"])(["crossOriginMedia"]),...Object(o["b"])(["getStac"]),cardProps(){let t={};return Array.isArray(this.selected)&&this.selected.find(t=>this.data.equals(t))&&(t["border-variant"]="danger"),t},data(){return this.item instanceof l["a"]?this.item:this.getStac(this.item.href)},thumbnail(){if(this.data){let t=this.data.getThumbnails(!0,"thumbnail");if(t.length>0)return t[0]}return{href:null,title:""}},extent(){return this.data&&(this.data.properties.start_datetime||this.data.properties.end_datetime)?[this.data.properties.start_datetime,this.data.properties.end_datetime]:null},fileFormats(){return this.data?Object.values(this.data.assets).filter(t=>Array.isArray(t.roles)&&t.roles.includes("data")&&"string"===typeof t.type).map(t=>t.type).filter((t,e,i)=>i.indexOf(t)===e):[]},isDeprecated(){return this.data instanceof l["a"]&&Boolean(this.data.properties.deprecated)}},methods:{load(t){t&&(this.showThumbnail=!0),this.item instanceof l["a"]||this.$store.commit(t?"queue":"unqueue",this.item.href)}}},p=h,d=(i("3e7f"),i("2877")),u=Object(d["a"])(p,n,r,!1,null,null,null),m=u.exports,f=function(){var t=this,e=t._self._c;return e("b-button-group",{class:t.classes},[e("b-button",{attrs:{disabled:!t.pagination.first,variant:"outline-primary"},on:{click:function(e){return t.paginate(t.pagination.first)}}},[t._v("« First")]),e("b-button",{attrs:{disabled:!t.pagination.prev,variant:"outline-primary"},on:{click:function(e){return t.paginate(t.pagination.prev)}}},[t._v("‹ Previous")]),e("b-button",{attrs:{disabled:!t.pagination.next,variant:"outline-primary"},on:{click:function(e){return t.paginate(t.pagination.next)}}},[t._v("Next ›")]),t.pagination.last?e("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.paginate(t.pagination.last)}}},[t._v("Last »")]):t._e()],1)},b=[],g={name:"Pagination",props:{pagination:{type:Object,default:()=>({})},placement:{type:String}},computed:{classes(){return"top"===this.placement?"mb-4 mt-2":"mb-2 mt-2"}},methods:{paginate(t){this.$emit("paginate",t,this.placement)}}},v=g,O=Object(d["a"])(v,f,b,!1,null,null,null),w=O.exports,y=i("5843"),j=i("7386"),k=i("025e"),I=i("d722"),_={name:"Items",components:{BCollapse:y["a"],BIconSearch:j["w"],Item:m,ItemFilter:()=>Promise.all([i.e("chunk-45b1a3e6"),i.e("chunk-74f2324d")]).then(i.bind(null,"5f67")),Pagination:w,SortButtons:()=>i.e("chunk-2d0d7a16").then(i.bind(null,"7843"))},props:{items:{type:Array,required:!0},stac:{type:Object,required:!0},api:{type:Boolean,default:!1},allowFilter:{type:Boolean,default:!0},apiFilters:{type:Object,default:()=>({})},pagination:{type:Object,default:()=>({})},chunkSize:{type:Number,default:90},selected:{type:Array,default:()=>[]}},data(){return{shownItems:this.chunkSize,filters:this.apiFilters,filtersOpen:!1,sort:0}},computed:{...Object(o["b"])(["supportsConformance"]),hasMore(){return this.items.length>this.shownItems},chunkedItems(){let t=this.items;return 0!==this.sort&&(t=t.slice(0).sort((t,e)=>l["a"].getDisplayTitle(t).localeCompare(l["a"].getDisplayTitle(e))),-1===this.sort&&(t=t.reverse())),!this.api&&this.items.length>this.chunkSize?t.slice(0,this.shownItems):t},canSort(){return this.supportsConformance(I["a"])}},watch:{filters:{deep:!0,handler(t){this.$emit("filterItems",t)}}},methods:{showMore(){this.shownItems+=this.chunkSize},paginate(t,e){"bottom"===e&&this.$refs.topPagination&&k["a"].scrollTo(this.$refs.topPagination.$el),this.$emit("paginate",t)}}},S=_,C=Object(d["a"])(S,s,a,!1,null,null,null);e["a"]=C.exports},"2d3b":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"search"},[t.root?t.supportsSearch?e("b-row",[e("b-col",{staticClass:"left"},[e("ItemFilter",{attrs:{stac:t.root,title:"",value:t.filters,sort:t.canSort},on:{input:t.setFilters}})],1),e("b-col",{staticClass:"right"},[null===t.loading?e("b-alert",{attrs:{variant:"light",show:""}},[t._v("Please modify the search criteria.")]):!0===t.loading?e("div",{staticClass:"loading text-center"},[e("b-spinner",{attrs:{label:"Loading..."}})],1):0===t.apiItems.length?e("b-alert",{attrs:{variant:"info",show:""}},[t._v("Sorry, no items match the given criteria.")]):[e("Map",{attrs:{stac:t.root,stacLayerData:t.itemCollection},on:{mapClicked:t.mapClicked}}),e("Items",{attrs:{stac:t.root,items:t.apiItems,api:!0,allowFilter:!1,selected:t.selected,pagination:t.itemPages},on:{paginate:t.paginateItems}})]],2)],1):e("b-alert",{attrs:{variant:"danger",show:""}},[t._v("Item Search (with 'GET') is not supported by the API.")]):e("div",{staticClass:"loading text-center"},[e("b-spinner",{attrs:{label:"Loading..."}})],1)],1)},a=[],n=i("188f"),r=i("2f62"),o=i("025e"),c=i("d722");const l="Search";var h={name:"Search",components:{ItemFilter:()=>Promise.all([i.e("chunk-45b1a3e6"),i.e("chunk-74f2324d")]).then(i.bind(null,"5f67")),Items:n["a"],Map:()=>i.e("chunk-5ff41472").then(i.bind(null,"a0be"))},data(){return{loading:null,filters:{},selected:[]}},props:{loadRoot:{type:String,default:null}},created(){if(this.loadRoot&&!this.root){let t=this.fromBrowserPath(this.loadRoot);this.$store.commit("config",{catalogUrl:t})}},computed:{...Object(r["c"])(["apiItems","apiItemsLink","apiItemsPagination","apiItemsFilter"]),...Object(r["b"])(["root","searchLink","supportsSearch","supportsConformance","fromBrowserPath"]),itemCollection(){return{type:"FeatureCollection",features:this.apiItems,links:[]}},itemPages(){let t=Object.assign({},this.apiItemsPagination);return!t.first&&this.data&&this.apiItemsLink&&(t.first=o["a"].addFiltersToLink(this.apiItemsLink,this.apiItemsFilter)),t},canSort(){return this.supportsConformance(c["a"])}},watch:{supportsSearch:{immediate:!0,handler(){this.supportsSearch&&this.showPage()}}},methods:{async setFilters(t,e=!1){this.filters=t,e?(this.$store.commit("resetApiItems"),this.loading=null):await this.filterItems(t)},showPage(){this.$store.commit("showPage",{title:l}),this.$store.commit("setApiItemsLink",this.searchLink)},async paginateItems(t){try{let e=await this.$store.dispatch("loadApiItems",{link:t,show:!0});this.handleResponse(e)}catch(e){this.$root.$emit("error",e,"Sorry, loading the list of STAC Items failed.")}},async filterItems(t){this.loading=!0;try{let e=await this.$store.dispatch("loadApiItems",{link:this.searchLink,show:!0,filters:t});this.handleResponse(e)}catch(e){this.$root.$emit("error",e,"Sorry, loading a filtered list of STAC Items failed.")}finally{this.loading=!1}},handleResponse(t){t&&this.$store.commit("showPage",{title:l,url:t.config.url})},mapClicked(t){"Feature"===t.type&&(this.selected=[t.data])}}},p=h,d=(i("dbe1"),i("2877")),u=Object(d["a"])(p,s,a,!1,null,"01b3e640",null);e["default"]=u.exports},"3e7f":function(t,e,i){"use strict";i("70c9")},5843:function(t,e,i){"use strict";i.d(e,"a",(function(){return B}));var s,a=i("2f79"),n=i("c637"),r="show",o=i("e863"),c=i("0056"),l=i("a723"),h=i("9b76"),p=i("906c"),d=i("6b77"),u=i("58f2"),m=i("d82f"),f=i("cf75"),b=i("90ef"),g=i("602d"),v=i("8c18"),O=i("b42e"),w=function(t){Object(p["D"])(t,"height",0),Object(p["z"])((function(){Object(p["v"])(t),Object(p["D"])(t,"height","".concat(t.scrollHeight,"px"))}))},y=function(t){Object(p["y"])(t,"height")},j=function(t){Object(p["D"])(t,"height","auto"),Object(p["D"])(t,"display","block"),Object(p["D"])(t,"height","".concat(Object(p["i"])(t).height,"px")),Object(p["v"])(t),Object(p["D"])(t,"height",0)},k=function(t){Object(p["y"])(t,"height")},I={css:!0,enterClass:"",enterActiveClass:"collapsing",enterToClass:"collapse show",leaveClass:"collapse show",leaveActiveClass:"collapsing",leaveToClass:"collapse"},_={enter:w,afterEnter:y,leave:j,afterLeave:k},S={appear:Object(f["c"])(l["g"],!1)},C=Object(a["c"])({name:n["r"],functional:!0,props:S,render:function(t,e){var i=e.props,s=e.data,a=e.children;return t("transition",Object(O["a"])(s,{props:I,on:_},{props:i}),a)}});function P(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function x(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?P(Object(i),!0).forEach((function(e){$(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):P(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function $(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var F=Object(d["d"])(n["q"],"toggle"),A=Object(d["d"])(n["q"],"request-state"),D=Object(d["e"])(n["q"],"accordion"),L=Object(d["e"])(n["q"],"state"),T=Object(d["e"])(n["q"],"sync-state"),E=Object(u["a"])("visible",{type:l["g"],defaultValue:!1}),R=E.mixin,q=E.props,N=E.prop,M=E.event,z=Object(f["d"])(Object(m["l"])(x(x(x({},b["b"]),q),{},{accordion:Object(f["c"])(l["r"]),appear:Object(f["c"])(l["g"],!1),isNav:Object(f["c"])(l["g"],!1),tag:Object(f["c"])(l["r"],"div")})),n["q"]),B=Object(a["c"])({name:n["q"],mixins:[b["a"],R,v["a"],g["a"]],props:z,data:function(){return{show:this[N],transitioning:!1}},computed:{classObject:function(){var t=this.transitioning;return{"navbar-collapse":this.isNav,collapse:!t,show:this.show&&!t}},slotScope:function(){var t=this;return{visible:this.show,close:function(){t.show=!1}}}},watch:(s={},$(s,N,(function(t){t!==this.show&&(this.show=t)})),$(s,"show",(function(t,e){t!==e&&this.emitState()})),s),created:function(){this.show=this[N]},mounted:function(){var t=this;this.show=this[N],this.listenOnRoot(F,this.handleToggleEvent),this.listenOnRoot(D,this.handleAccordionEvent),this.isNav&&(this.setWindowEvents(!0),this.handleResize()),this.$nextTick((function(){t.emitState()})),this.listenOnRoot(A,(function(e){e===t.safeId()&&t.$nextTick(t.emitSync)}))},updated:function(){this.emitSync()},deactivated:function(){this.isNav&&this.setWindowEvents(!1)},activated:function(){this.isNav&&this.setWindowEvents(!0),this.emitSync()},beforeDestroy:function(){this.show=!1,this.isNav&&o["g"]&&this.setWindowEvents(!1)},methods:{setWindowEvents:function(t){Object(d["c"])(t,window,"resize",this.handleResize,c["R"]),Object(d["c"])(t,window,"orientationchange",this.handleResize,c["R"])},toggle:function(){this.show=!this.show},onEnter:function(){this.transitioning=!0,this.$emit(c["M"])},onAfterEnter:function(){this.transitioning=!1,this.$emit(c["N"])},onLeave:function(){this.transitioning=!0,this.$emit(c["u"])},onAfterLeave:function(){this.transitioning=!1,this.$emit(c["t"])},emitState:function(){var t=this.show,e=this.accordion,i=this.safeId();this.$emit(M,t),this.emitOnRoot(L,i,t),e&&t&&this.emitOnRoot(D,i,e)},emitSync:function(){this.emitOnRoot(T,this.safeId(),this.show)},checkDisplayBlock:function(){var t=this.$el,e=Object(p["o"])(t,r);Object(p["x"])(t,r);var i="block"===Object(p["k"])(t).display;return e&&Object(p["b"])(t,r),i},clickHandler:function(t){var e=t.target;this.isNav&&e&&"block"===Object(p["k"])(this.$el).display&&(!Object(p["u"])(e,".nav-link,.dropdown-item")&&!Object(p["e"])(".nav-link,.dropdown-item",e)||this.checkDisplayBlock()||(this.show=!1))},handleToggleEvent:function(t){t===this.safeId()&&this.toggle()},handleAccordionEvent:function(t,e){var i=this.accordion,s=this.show;if(i&&i===e){var a=t===this.safeId();(a&&!s||!a&&s)&&this.toggle()}},handleResize:function(){this.show="block"===Object(p["k"])(this.$el).display}},render:function(t){var e=this.appear,i=t(this.tag,{class:this.classObject,directives:[{name:"show",value:this.show}],attrs:{id:this.safeId()},on:{click:this.clickHandler}},this.normalizeSlot(h["e"],this.slotScope));return t(C,{props:{appear:e},on:{enter:this.onEnter,afterEnter:this.onAfterEnter,leave:this.onLeave,afterLeave:this.onAfterLeave}},[i])}})},"70c9":function(t,e,i){},cf82:function(t,e,i){},d722:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));const s="https://api.stacspec.org/v1.*/item-search#sort"},dbe1:function(t,e,i){"use strict";i("cf82")}}]);
//# sourceMappingURL=chunk-7e2c118a.6c1b4405.js.map